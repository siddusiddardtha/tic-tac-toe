<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tic Tac Toe</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        h1 { color: #333; }
        .board { display: grid; grid-template-columns: repeat(3, 100px); margin: 20px auto; }
        .cell {
            width: 100px; height: 100px; 
            border: 1px solid #333;
            font-size: 50px; 
            display: flex; 
            justify-content: center; 
            align-items: center;
            cursor: pointer;
        }
        button { margin: 10px; padding: 10px 20px; font-size: 16px; }
    </style>
</head>
<body>

<h1>Tic Tac Toe</h1>

<div id="modeSelection">
    <button onclick="startGame('friend')">Play with Friend</button>
    <button onclick="startGame('computer')">Play with Computer</button>
</div>

<div class="board" id="board" style="display:none;"></div>
<p id="message"></p>

<script>
    const board = document.getElementById("board");
    const message = document.getElementById("message");
    let currentPlayer = "X";
    let cells = [];
    let gameMode = ""; // 'friend' or 'computer'

    function startGame(mode) {
        gameMode = mode;
        document.getElementById("modeSelection").style.display = "none";
        board.style.display = "grid";
        initBoard();
    }

    function initBoard() {
        board.innerHTML = "";
        cells = [];
        currentPlayer = "X";
        message.innerText = "";
        board.style.pointerEvents = "auto";

        for (let i = 0; i < 9; i++) {
            let cell = document.createElement("div");
            cell.className = "cell";
            cell.addEventListener("click", () => cellClick(cell));
            board.appendChild(cell);
            cells.push(cell);
        }
    }

    function cellClick(cell) {
        if (cell.innerText === "" && board.style.pointerEvents !== "none") {
            cell.innerText = currentPlayer;
            if (checkWinner()) {
                message.innerText = `Player ${currentPlayer} wins!`;
                board.style.pointerEvents = "none";
                return;
            }
            if (isDraw()) {
                message.innerText = "It's a draw!";
                return;
            }
            currentPlayer = currentPlayer === "X" ? "O" : "X";

            if (gameMode === "computer" && currentPlayer === "O") {
                setTimeout(computerMove, 500);
            }
        }
    }

    function computerMove() {
        let emptyCells = cells.filter(cell => cell.innerText === "");
        if (emptyCells.length === 0) return;
        let randomCell = emptyCells[Math.floor(Math.random() * emptyCells.length)];
        randomCell.innerText = "O";
        if (checkWinner()) {
            message.innerText = "Computer wins!";
            board.style.pointerEvents = "none";
            return;
        }
        if (isDraw()) {
            message.innerText = "It's a draw!";
            return;
        }
        currentPlayer = "X";
    }

    function checkWinner() {
        const wins = [
            [0,1,2], [3,4,5], [6,7,8],
            [0,3,6], [1,4,7], [2,5,8],
            [0,4,8], [2,4,6]
        ];

        return wins.some(win => {
            const [a, b, c] = win;
            return cells[a].innerText !== "" &&
                   cells[a].innerText === cells[b].innerText &&
                   cells[a].innerText === cells[c].innerText;
        });
    }

    function isDraw() {
        return [...cells].every(cell => cell.innerText !== "");
    }
</script>

</body>
</html>
