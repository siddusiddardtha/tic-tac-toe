<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tic Tac Toe Pro</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-align: center;
            background: linear-gradient(135deg, #89f7fe, #66a6ff);
            margin: 0;
            padding: 0;
            color: #fff;
        }

        h1 {
            margin-top: 30px;
            font-size: 48px;
            text-shadow: 2px 2px 4px #000;
        }

        .mode-buttons button, #restartBtn {
            margin: 10px;
            padding: 15px 30px;
            font-size: 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: 0.3s;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.4);
        }

        .mode-buttons button:hover, #restartBtn:hover {
            transform: scale(1.05);
            background-color: rgba(255, 255, 255, 0.2);
        }

        .board {
            display: grid;
            grid-template-columns: repeat(3, 100px);
            grid-gap: 15px;
            margin: 30px auto;
        }

        .cell {
            width: 100px;
            height: 100px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            font-size: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: 0.3s;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
        }

        .cell:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }

        #message {
            font-size: 26px;
            margin: 20px 0;
            text-shadow: 1px 1px 3px #000;
        }

        #scoreboard {
            font-size: 22px;
            margin-bottom: 20px;
        }

        @media (max-width: 500px) {
            .board { grid-template-columns: repeat(3, 80px); grid-gap: 10px; }
            .cell { width: 80px; height: 80px; font-size: 40px; }
            h1 { font-size: 36px; }
            .mode-buttons button, #restartBtn { font-size: 18px; padding: 10px 20px; }
        }
    </style>
</head>
<body>

<h1>Tic Tac Toe Pro</h1>

<div class="mode-buttons" id="modeSelection">
    <button onclick="startGame('friend')">Play with Friend</button>
    <button onclick="startGame('computer')">Play with Computer</button>
</div>

<div class="board" id="board" style="display:none;"></div>

<div id="message"></div>

<div id="scoreboard" style="display:none;">
    <p>Player X Wins: <span id="xScore">0</span> | Player O Wins: <span id="oScore">0</span></p>
</div>

<button id="restartBtn" style="display:none;" onclick="restartGame()">Restart</button>

<script>
    const board = document.getElementById("board");
    const message = document.getElementById("message");
    const restartBtn = document.getElementById("restartBtn");
    const scoreboard = document.getElementById("scoreboard");
    let xScore = 0;
    let oScore = 0;
    let currentPlayer = "X";
    let cells = [];
    let gameMode = "";

    function startGame(mode) {
        gameMode = mode;
        document.getElementById("modeSelection").style.display = "none";
        board.style.display = "grid";
        scoreboard.style.display = "block";
        restartBtn.style.display = "inline-block";
        initBoard();
    }

    function initBoard() {
        board.innerHTML = "";
        cells = [];
        currentPlayer = "X";
        message.innerText = "";
        board.style.pointerEvents = "auto";

        for (let i = 0; i < 9; i++) {
            let cell = document.createElement("div");
            cell.className = "cell";
            cell.addEventListener("click", () => cellClick(cell));
            board.appendChild(cell);
            cells.push(cell);
        }
    }

    function cellClick(cell) {
        if (cell.innerText === "" && board.style.pointerEvents !== "none") {
            cell.innerText = currentPlayer;
            if (checkWinner()) {
                handleWin(currentPlayer);
                return;
            }
            if (isDraw()) {
                message.innerText = "It's a draw!";
                board.style.pointerEvents = "none";
                return;
            }
            currentPlayer = currentPlayer === "X" ? "O" : "X";

            if (gameMode === "computer" && currentPlayer === "O") {
                setTimeout(computerMove, 400);
            }
        }
    }

    function computerMove() {
        let move = findBestMove("O") || findBestMove("X") || randomMove();
        if (move !== null) {
            cells[move].innerText = "O";
            if (checkWinner()) {
                handleWin("O");
                return;
            }
            if (isDraw()) {
                message.innerText = "It's a draw!";
                board.style.pointerEvents = "none";
                return;
            }
            currentPlayer = "X";
        }
    }

    function findBestMove(player) {
        for (let i = 0; i < cells.length; i++) {
            if (cells[i].innerText === "") {
                cells[i].innerText = player;
                if (checkWinner()) {
                    cells[i].innerText = "";
                    return i;
                }
                cells[i].innerText = "";
            }
        }
        return null;
    }

    function randomMove() {
        let emptyCells = cells.map((cell, idx) => cell.innerText === "" ? idx : null).filter(idx => idx !== null);
        return emptyCells.length > 0 ? emptyCells[Math.floor(Math.random() * emptyCells.length)] : null;
    }

    function checkWinner() {
        const wins = [
            [0,1,2], [3,4,5], [6,7,8],
            [0,3,6], [1,4,7], [2,5,8],
            [0,4,8], [2,4,6]
        ];

        return wins.some(win => {
            const [a, b, c] = win;
            return cells[a].innerText !== "" &&
                   cells[a].innerText === cells[b].innerText &&
                   cells[a].innerText === cells[c].innerText;
        });
    }

    function isDraw() {
        return [...cells].every(cell => cell.innerText !== "");
    }

    function handleWin(player) {
        message.innerText = `ðŸŽ‰ Player ${player} Wins!`;
        board.style.pointerEvents = "none";
        if (player === "X") {
            xScore++;
            document.getElementById("xScore").innerText = xScore;
        } else {
            oScore++;
            document.getElementById("oScore").innerText = oScore;
        }
    }

    function restartGame() {
        initBoard();
    }
</script>

</body>
</html>
